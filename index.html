<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BaseXX Visualizer — Base32/58/64/91比較ツール</title>
  <meta name="description" content="Base64を基準にBase32/58/91との違いを体験的に学べる教育用ビジュアライザー" />
  <link rel="stylesheet" href="./style.css" />
  <script defer src="./script.js"></script>
</head>
<body>
  <header class="site-header">
    <h1>BaseXX Visualizer</h1>
    <p class="subtitle">Base64 基準で Base32 / Base58 / Base91 を比較する学習用ツール</p>
  </header>

  <main class="container">
    <!-- Tabs -->
    <nav class="tabs" role="tablist" aria-label="Base encodings">
      <button class="tab-button active" data-tab="overview" role="tab" aria-selected="true" aria-controls="panel-overview">基本</button>
      <button class="tab-button" data-tab="playground" role="tab" aria-selected="false" aria-controls="panel-playground">体験</button>
      <button class="tab-button" data-tab="efficiency" role="tab" aria-selected="false" aria-controls="panel-efficiency">長さと効率</button>
      <button class="tab-button" data-tab="errors" role="tab" aria-selected="false" aria-controls="panel-errors">誤読デモ</button>
      <button class="tab-button" data-tab="base91" role="tab" aria-selected="false" aria-controls="panel-base91">Base91（おまけ）</button>
    </nav>

    <!-- Panels -->
    <section id="panel-overview" class="tab-panel active" role="tabpanel" aria-labelledby="overview">
      <h2>基本（Overview）</h2>

      <div class="card">
        <p>
          本ツールは <strong>Base64を基準</strong> に、Base32・Base58・Base91 の
          <em>文字集合・用途・設計思想</em> を俯瞰できる教育用ビジュアライザーです。
        </p>
      </div>

      <div class="card">
        <h3>文字集合の早見</h3>
        <div class="chip-row">
          <button class="chip chip-select active" data-alphabet="base64">Base64</button>
          <button class="chip chip-select" data-alphabet="base32">Base32</button>
          <button class="chip chip-select" data-alphabet="base58">Base58</button>
          <button class="chip chip-select" data-alphabet="base91">Base91</button>
        </div>
        <pre class="alphabet-box" id="alphabetBox" aria-live="polite"></pre>
        <p class="note">
          ※ URL で使う場合、Base64 は <code>+</code> と <code>/</code> が問題になることがあります（URL-safe 変種あり）。Base32/58 は
          可読性・取り扱いのしやすさを重視して設計されています。
        </p>
      </div>

      <div class="card">
        <h3>用途のざっくり比較</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>方式</th><th>主用途</th><th>特徴（Base64基準）</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Base64</td>
                <td>汎用（メール/HTTP/鍵/画像）</td>
                <td>標準的・実装豊富だが <code>+ /</code> や誤読が課題</td>
              </tr>
              <tr>
                <td>Base32</td>
                <td>TOTPシークレット、DNS等</td>
                <td>冗長だが読みやすく誤読が少ない</td>
              </tr>
              <tr>
                <td>Base58</td>
                <td>Bitcoinアドレス等</td>
                <td>誤読しやすい文字を除去し可読性重視</td>
              </tr>
              <tr>
                <td>Base91</td>
                <td>研究/通信効率</td>
                <td>短くできるが特殊記号多用・普及度低い</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="panel-playground" class="tab-panel" role="tabpanel" aria-labelledby="playground">
      <h2>体験（Playground）</h2>
      <div class="grid-2">
        <div class="card">
          <h3>入力</h3>
          <div class="row">
            <label class="switch">
              <input type="checkbox" id="modeHex" />
              <span>HEX入力に切替</span>
            </label>
            <label class="switch">
              <input type="checkbox" id="togglePadding" checked />
              <span>パディング（=）を表示</span>
            </label>
          </div>
          <textarea id="inputArea" rows="6" placeholder="例：hello"></textarea>
          <div class="btn-row">
            <button id="btnDemoHello" class="btn secondary">デモ: hello</button>
            <button id="btnDemoJP" class="btn secondary">デモ: こんにちは</button>
            <button id="btnDemoHex" class="btn secondary">デモ: DE AD BE EF</button>
            <span class="spacer"></span>
            <button id="btnEncode" class="btn primary" aria-label="エンコードを実行">エンコード</button>
            <button id="btnDecode" class="btn" aria-label="デコードを実行">デコード</button>
          </div>
          <p id="inputError" class="error" aria-live="polite" hidden></p>
        </div>

        <div class="card">
          <h3>出力（比較）</h3>
          <div class="outputs">
            <div class="out-card">
              <div class="out-head">
                <span class="badge base64">Base64</span>
                <button class="btn tiny copy-btn" data-copy-target="out64" aria-label="Base64出力をコピー">コピー</button>
              </div>
              <pre id="out64" class="out-text"></pre>
              <div class="meta"><span id="len64">長さ: -</span> / <span id="rate64">膨張率: -</span></div>
            </div>
            <div class="out-card">
              <div class="out-head">
                <span class="badge base32">Base32</span>
                <button class="btn tiny copy-btn" data-copy-target="out32" aria-label="Base32出力をコピー">コピー</button>
              </div>
              <pre id="out32" class="out-text"></pre>
              <div class="meta"><span id="len32">長さ: -</span> / <span id="rate32">膨張率: -</span></div>
            </div>
            <div class="out-card">
              <div class="out-head">
                <span class="badge base58">Base58</span>
                <button class="btn tiny copy-btn" data-copy-target="out58" aria-label="Base58出力をコピー">コピー</button>
              </div>
              <pre id="out58" class="out-text"></pre>
              <div class="meta"><span id="len58">長さ: -</span> / <span id="rate58">膨張率: -</span></div>
            </div>
            <div class="out-card">
              <div class="out-head">
                <span class="badge base91">Base91</span>
                <button class="btn tiny copy-btn" data-copy-target="out91" aria-label="Base91出力をコピー">コピー</button>
              </div>
              <pre id="out91" class="out-text"></pre>
              <div class="meta"><span id="len91">長さ: -</span> / <span id="rate91">膨張率: -</span></div>
            </div>
          </div>
          <p class="note">※ 初期版ではエンコード/デコードは未実装です（UIの雛形）。</p>
        </div>
      </div>
    </section>

    <section id="panel-efficiency" class="tab-panel" role="tabpanel" aria-labelledby="efficiency">
      <h2>長さと効率（Size / Efficiency）</h2>

      <div class="card">
        <div class="row">
          <label for="sizeSlider">原データ長（バイト）:</label>
          <input id="sizeSlider" type="range" min="1" max="256" value="16" />
          <output id="sizeValue">16</output>
        </div>

        <div class="bar-legend">
          <span class="badge base64">Base64</span>
          <span class="badge base32">Base32</span>
          <span class="badge base58">Base58</span>
          <span class="badge base91">Base91</span>
        </div>

        <div class="bars" aria-live="polite">
          <div class="bar-row">
            <div class="bar-label">Base64</div>
            <div class="bar"><div id="bar64" class="bar-fill base64" style="width:0%"></div></div>
            <div id="bar64Text" class="bar-text">-</div>
          </div>
          <div class="bar-row">
            <div class="bar-label">Base32</div>
            <div class="bar"><div id="bar32" class="bar-fill base32" style="width:0%"></div></div>
            <div id="bar32Text" class="bar-text">-</div>
          </div>
          <div class="bar-row">
            <div class="bar-label">Base58</div>
            <div class="bar"><div id="bar58" class="bar-fill base58" style="width:0%"></div></div>
            <div id="bar58Text" class="bar-text">-</div>
          </div>
          <div class="bar-row">
            <div class="bar-label">Base91</div>
            <div class="bar"><div id="bar91" class="bar-fill base91" style="width:0%"></div></div>
            <div id="bar91Text" class="bar-text">-</div>
          </div>
        </div>

        <p class="note">※ この棒グラフは <strong>Base64=100%</strong> の相対比較表示。初期版は理論上の簡易推定値です。</p>
      </div>
    </section>

    <section id="panel-errors" class="tab-panel" role="tabpanel" aria-labelledby="errors">
      <h2>誤読デモ（Human Errors）</h2>

      <div class="card">
        <p>Base64 では以下の誤読が起きがちです：</p>
        <ul class="bullets">
          <li><code>O</code>（オー） ↔ <code>0</code>（ゼロ）</li>
          <li><code>I</code>（アイ大） ↔ <code>l</code>（エル小） ↔ <code>1</code>（イチ）</li>
          <li><code>+</code> ↔ スペース/URLエンコード問題</li>
          <li><code>/</code> ↔ パス区切り誤認</li>
        </ul>
      </div>

      <div class="card">
        <h3>インタラクティブ例（UIひな形）</h3>
        <div class="grid-2">
          <div>
            <label for="errSource" class="label">Base64 文字列（例）</label>
            <input id="errSource" type="text" class="input" value="QUJDREVGRw==" />
            <div class="row wrap">
              <label class="switch"><input type="checkbox" data-swap="O0" />O ↔ 0 を混入</label>
              <label class="switch"><input type="checkbox" data-swap="Il" />I ↔ l を混入</label>
              <label class="switch"><input type="checkbox" data-swap="I1" />I ↔ 1 を混入</label>
              <label class="switch"><input type="checkbox" data-swap="+ " />+ ↔ スペース を混入</label>
            </div>
            <button id="btnApplyErrors" class="btn">誤読を入れる（デモ）</button>
          </div>
          <div>
            <label class="label">結果（デモ表示）</label>
            <pre id="errResult" class="out-text"></pre>
            <p class="note">※ 初期版は UI の雛形のみ。将来、復号失敗やデータ化けの挙動をここに表示。</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Base32 / Base58 なら？</h3>
        <p>
          Base32 は A–Z と 2–7 のみ、Base58 は 0/O/I/l/+/<code>/</code> を除去しており、
          上記の混同が <strong>そもそも発生しにくい</strong> ように設計されています。
        </p>
      </div>
    </section>

    <section id="panel-base91" class="tab-panel" role="tabpanel" aria-labelledby="base91">
      <h2>Base91（おまけ）</h2>

      <div class="card">
        <p>
          Base91 は印字可能 ASCII を広く使い、エンコード後のサイズを
          <strong>Base64 より短く</strong> できる場合があります。
          ただし、特殊記号が多く、実装互換性や取り扱いが難しいため普及は限定的です。
        </p>
        <p class="note">※ ここでは雑学的な紹介に留め、実装は簡易例に留めます。</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer">
      🔗 GitHubリポジトリはこちら（ <a href="https://github.com/ipusiron/basexx-visualizer" target="_blank">ipusiron/basexx-visualizer</a> ）
    </div>
  </footer>
</body>
</html>
